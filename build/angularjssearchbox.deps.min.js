"use strict";angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var d=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(c,h){return function(e,t){var a,i,s,r,n,o={},l=angular.extend({},d,t);return o.$values=[],o.init=function(){o.$match=a=e.match(l.regexp),i=c(a[2]||a[1]),s=a[4]||a[6],a[5],c(a[3]||""),r=c(a[2]?a[1]:s),n=c(a[7])},o.valuesFn=function(t,e){return h.when(n(t,e)).then(function(e){return o.$values=e?(n=t,e.map(function(e,t){var a={};return a[s]=e,{label:i(n,a),value:r(n,a)||t}})):{},o.$values;var n})},o.init(),o}}]}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(){var i=(angular.element,{}),s=i.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};i.css=function(e,t,a){var n;return n=e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e)[t]:e.style[t],!0===a?parseFloat(n)||0:n},i.offset=function(e){var t=e.getBoundingClientRect(),a=e.ownerDocument;return{width:t.width||e.offsetWidth,height:t.height||e.offsetHeight,top:t.top+(window.pageYOffset||a.documentElement.scrollTop)-(a.documentElement.clientTop||0),left:t.left+(window.pageXOffset||a.documentElement.scrollLeft)-(a.documentElement.clientLeft||0)}},i.position=function(e){var t,a,n={top:0,left:0};return"fixed"===i.css(e,"position")?a=e.getBoundingClientRect():(t=r(e),a=i.offset(e),a=i.offset(e),s(t,"html")||(n=i.offset(t)),n.top+=i.css(t,"borderTopWidth",!0),n.left+=i.css(t,"borderLeftWidth",!0)),{width:e.offsetWidth,height:e.offsetHeight,top:a.top-n.top-i.css(e,"marginTop",!0),left:a.left-n.left-i.css(e,"marginLeft",!0)}};var r=function(e){var t=e.ownerDocument,a=e.offsetParent||t;if(s(a,"#document"))return t.documentElement;for(;a&&!s(a,"html")&&"static"===i.css(a,"position");)a=a.offsetParent;return a||t.documentElement};return i.height=function(e,t){var a=e.offsetHeight;return t?a+=i.css(e,"marginTop",!0)+i.css(e,"marginBottom",!0):a-=i.css(e,"paddingTop",!0)+i.css(e,"paddingBottom",!0)+i.css(e,"borderTopWidth",!0)+i.css(e,"borderBottomWidth",!0),a},i.width=function(e,t){var a=e.offsetWidth;return t?a+=i.css(e,"marginLeft",!0)+i.css(e,"marginRight",!0):a-=i.css(e,"paddingLeft",!0)+i.css(e,"paddingRight",!0)+i.css(e,"borderLeftWidth",!0)+i.css(e,"borderRightWidth",!0),a},i}]),function(c){var p,e,n=this,u=Math.round,m=0,g=1,y=2,v=3,D=4,o=5,l=6,h={},i={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},d="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,r=/^\/?Date\((\-?\d+)/i,f=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,b=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,s=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,w=/\d\d?/,k=/\d{1,3}/,Y=/\d{1,4}/,$=/[+\-]?\d{1,6}/,M=/\d+/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,L=/Z|[\+\-]\d\d:?\d\d/gi,O=/T/i,x=/[\+\-]?\d+(\.\d{1,3})?/,S=/\d/,T=/\d\d/,R=/\d{3}/,P=/\d{4}/,F=/[+-]?\d{6}/,W=/[+-]?\d+/,I=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,E=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],A=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],G=/([\+\-]|\d\d)/gi,t="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),a={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},H={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},B={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},j={},z="DDD w W M D d".split(" "),U="M D H h m s w W".split(" "),V={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return te(this.year()%100,2)},YYYY:function(){return te(this.year(),4)},YYYYY:function(){return te(this.year(),5)},YYYYYY:function(){var e=this.year();return(0<=e?"+":"-")+te(Math.abs(e),6)},gg:function(){return te(this.weekYear()%100,2)},gggg:function(){return te(this.weekYear(),4)},ggggg:function(){return te(this.weekYear(),5)},GG:function(){return te(this.isoWeekYear()%100,2)},GGGG:function(){return te(this.isoWeekYear(),4)},GGGGG:function(){return te(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return le(this.milliseconds()/100)},SS:function(){return te(le(this.milliseconds()/10),2)},SSS:function(){return te(this.milliseconds(),3)},SSSS:function(){return te(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+te(le(e/60),2)+":"+te(le(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+te(le(e/60),2)+te(le(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},N=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function Z(t,a){return function(e){return te(t.call(this,e),a)}}function K(t,a){return function(e){return this.lang().ordinal(t.call(this,e),a)}}for(;z.length;)e=z.pop(),V[e+"o"]=K(V[e],e);for(;U.length;)e=U.pop(),V[e+e]=Z(V[e],2);function J(){}function q(e){ue(e),Q(this,e)}function X(e){var t=re(e),a=t.year||0,n=t.month||0,i=t.week||0,s=t.day||0,r=t.hour||0,o=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*o+36e5*r,this._days=+s+7*i,this._months=+n+12*a,this._data={},this._bubble()}function Q(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function ee(e){return e<0?Math.ceil(e):Math.floor(e)}function te(e,t,a){for(var n=""+Math.abs(e),i=0<=e;n.length<t;)n="0"+n;return(i?a?"+":"":"-")+n}function ae(e,t,a,n){var i,s,r=t._milliseconds,o=t._days,l=t._months;r&&e._d.setTime(+e._d+r*a),(o||l)&&(i=e.minute(),s=e.hour()),o&&e.date(e.date()+o*a),l&&e.month(e.month()+l*a),r&&!n&&p.updateOffset(e),(o||l)&&(e.minute(i),e.hour(s))}function ne(e){return"[object Array]"===Object.prototype.toString.call(e)}function ie(e,t,a){var n,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;n<i;n++)(a&&e[n]!==t[n]||!a&&le(e[n])!==le(t[n]))&&r++;return r+s}function se(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=H[e]||B[t]||t}return e}function re(e){var t,a,n={};for(a in e)e.hasOwnProperty(a)&&(t=se(a))&&(n[t]=e[a]);return n}function oe(r){var o,l;if(0===r.indexOf("week"))o=7,l="day";else{if(0!==r.indexOf("month"))return;o=12,l="month"}p[r]=function(a,e){var t,n,i=p.fn._lang[r],s=[];if("number"==typeof a&&(e=a,a=c),n=function(e){var t=p().utc().set(l,e);return i.call(p.fn._lang,t,a||"")},null!=e)return n(e);for(t=0;t<o;t++)s.push(n(t));return s}}function le(e){var t=+e,a=0;return 0!==t&&isFinite(t)&&(a=0<=t?Math.floor(t):Math.ceil(t)),a}function ce(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function he(e){return de(e)?366:365}function de(e){return e%4==0&&e%100!=0||e%400==0}function ue(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[g]<0||11<e._a[g]?g:e._a[y]<1||e._a[y]>ce(e._a[m],e._a[g])?y:e._a[v]<0||23<e._a[v]?v:e._a[D]<0||59<e._a[D]?D:e._a[o]<0||59<e._a[o]?o:e._a[l]<0||999<e._a[l]?l:-1,e._pf._overflowDayOfYear&&(t<m||y<t)&&(t=y),e._pf.overflow=t)}function fe(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function pe(e){return e?e.toLowerCase().replace("_","-"):e}function me(e,t){return t._isUTC?p(e).zone(t._offset||0):p(e).local()}function ge(e){var t,a,n,i,s=0,r=function(e){if(!h[e]&&d)try{require("./lang/"+e)}catch(e){}return h[e]};if(!e)return p.fn._lang;if(!ne(e)){if(a=r(e))return a;e=[e]}for(;s<e.length;){for(t=(i=pe(e[s]).split("-")).length,n=(n=pe(e[s+1]))?n.split("-"):null;0<t;){if(a=r(i.slice(0,t).join("-")))return a;if(n&&n.length>=t&&ie(i,n,!0)>=t-1)break;t--}s++}return p.fn._lang}function ye(e,t){return e.isValid()?(t=ve(t,e.lang()),j[t]||(j[t]=function(a){var n,i,e,s=a.match(_);for(n=0,i=s.length;n<i;n++)V[s[n]]?s[n]=V[s[n]]:s[n]=(e=s[n]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(n=0;n<i;n++)t+=s[n]instanceof Function?s[n].call(e,a):s[n];return t}}(t)),j[t](e)):e.lang().invalidDate()}function ve(e,t){var a=5;function n(e){return t.longDateFormat(e)||e}for(s.lastIndex=0;0<=a&&s.test(e);)e=e.replace(s,n),s.lastIndex=0,a-=1;return e}function De(e,t){var a,n=t._strict;switch(e){case"DDDD":return R;case"YYYY":case"GGGG":case"gggg":return n?P:Y;case"Y":case"G":case"g":return W;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?F:$;case"S":if(n)return S;case"SS":if(n)return T;case"SSS":if(n)return R;case"DDD":return k;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return C;case"a":case"A":return ge(t._l)._meridiemParse;case"X":return x;case"Z":case"ZZ":return L;case"T":return O;case"SSSS":return M;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?T:w;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return w;default:return new RegExp((a=e.replace("\\",""),a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,a,n,i){return t||a||n||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")))}}function be(e){var t=(e=e||"").match(L)||[],a=((t[t.length-1]||[])+"").match(G)||["-",0,0],n=60*a[1]+le(a[2]);return"+"===a[0]?-n:n}function _e(e,t,a){var n,i=a._a;switch(e){case"M":case"MM":null!=t&&(i[g]=le(t)-1);break;case"MMM":case"MMMM":null!=(n=ge(a._l).monthsParse(t))?i[g]=n:a._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[y]=le(t));break;case"DDD":case"DDDD":null!=t&&(a._dayOfYear=le(t));break;case"YY":i[m]=le(t)+(68<le(t)?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":i[m]=le(t);break;case"a":case"A":a._isPm=ge(a._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[v]=le(t);break;case"m":case"mm":i[D]=le(t);break;case"s":case"ss":i[o]=le(t);break;case"S":case"SS":case"SSS":case"SSSS":i[l]=le(1e3*("0."+t));break;case"X":a._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":a._useUTC=!0,a._tzm=be(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(a._w=a._w||{},a._w[e]=t)}}function we(a){var e,t,n,i,s,r,o,l,c,h,d=[];if(!a._d){var u,f;for(u=a,f=new Date,n=u._useUTC?[f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()]:[f.getFullYear(),f.getMonth(),f.getDate()],a._w&&null==a._a[y]&&null==a._a[g]&&(s=function(e){var t=parseInt(e,10);return e?e.length<3?68<t?1900+t:2e3+t:t:null==a._a[m]?p().weekYear():a._a[m]},o=null!=(r=a._w).GG||null!=r.W||null!=r.E?Le(s(r.GG),r.W||1,r.E,4,1):(l=ge(a._l),c=null!=r.d?Me(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,h=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&h++,Le(s(r.gg),h,c,l._week.doy,l._week.dow)),a._a[m]=o.year,a._dayOfYear=o.dayOfYear),a._dayOfYear&&(i=null==a._a[m]?n[m]:a._a[m],a._dayOfYear>he(i)&&(a._pf._overflowDayOfYear=!0),t=$e(i,0,a._dayOfYear),a._a[g]=t.getUTCMonth(),a._a[y]=t.getUTCDate()),e=0;e<3&&null==a._a[e];++e)a._a[e]=d[e]=n[e];for(;e<7;e++)a._a[e]=d[e]=null==a._a[e]?2===e?1:0:a._a[e];d[v]+=le((a._tzm||0)/60),d[D]+=le((a._tzm||0)%60),a._d=(a._useUTC?$e:function(e,t,a,n,i,s,r){var o=new Date(e,t,a,n,i,s,r);e<1970&&o.setFullYear(e);return o}).apply(null,d)}}function ke(e){e._a=[],e._pf.empty=!0;var t,a,n,i,s,r=ge(e._l),o=""+e._i,l=o.length,c=0;for(n=ve(e._f,r).match(_)||[],t=0;t<n.length;t++)i=n[t],(a=(o.match(De(i,e))||[])[0])&&(0<(s=o.substr(0,o.indexOf(a))).length&&e._pf.unusedInput.push(s),o=o.slice(o.indexOf(a)+a.length),c+=a.length),V[i]?(a?e._pf.empty=!1:e._pf.unusedTokens.push(i),_e(i,a,e)):e._strict&&!a&&e._pf.unusedTokens.push(i);e._pf.charsLeftOver=l-c,0<o.length&&e._pf.unusedInput.push(o),e._isPm&&e._a[v]<12&&(e._a[v]+=12),!1===e._isPm&&12===e._a[v]&&(e._a[v]=0),we(e),ue(e)}function Ye(e){var t,a,n,i=e._i,s=r.exec(i);i===c?e._d=new Date:s?e._d=new Date(+s[1]):"string"==typeof i?function(e){var t,a,n=e._i,i=I.exec(n);if(i){for(e._pf.iso=!0,t=0,a=E.length;t<a;t++)if(E[t][1].exec(n)){e._f=E[t][0]+(i[6]||" ");break}for(t=0,a=A.length;t<a;t++)if(A[t][1].exec(n)){e._f+=A[t][0];break}n.match(L)&&(e._f+="Z"),ke(e)}else e._d=new Date(n)}(e):ne(i)?(e._a=i.slice(0),we(e)):(n=i,"[object Date]"===Object.prototype.toString.call(n)||n instanceof Date?e._d=new Date(+i):"object"==typeof i?(t=e)._d||(a=re(t._i),t._a=[a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond],we(t)):e._d=new Date(i))}function $e(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Me(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function Ce(e,t,a){var n,i=a-t,s=a-e.day();return i<s&&(s-=7),s<i-7&&(s+=7),n=p(e).add("d",s),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Le(e,t,a,n,i){var s,r=$e(e,0,1).getUTCDay();return{year:0<(s=7*(t-1)+((a=null!=a?a:i)-i)+(i-r+(n<r?7:0)-(r<i?7:0))+1)?e:e-1,dayOfYear:0<s?s:he(e-1)+s}}function Oe(e){var t=e._i,a=e._f;return null===t?p.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=ge().preparse(t)),p.isMoment(t)?(e=function(e){var t,a={};for(t in e)e.hasOwnProperty(t)&&i.hasOwnProperty(t)&&(a[t]=e[t]);return a}(t))._d=new Date(+t._d):a?ne(a)?function(e){var t,a,n,i,s;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)s=0,(t=Q({},e))._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},t._f=e._f[i],ke(t),fe(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==n||s<n)&&(n=s,a=t));Q(e,a||t)}(e):ke(e):Ye(e),new q(e))}for(V.DDDD=Z(V.DDD,3),Q(J.prototype,{set:function(e){var t,a;for(a in e)"function"==typeof(t=e[a])?this[a]=t:this["_"+a]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,a,n;for(this._monthsParse||(this._monthsParse=[]),t=0;t<12;t++)if(this._monthsParse[t]||(a=p.utc([2e3,t]),n="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,a,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(a=p([2e3,1]).day(t),n="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,a){return 11<e?a?"pm":"PM":a?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var a=this._calendar[e];return"function"==typeof a?a.apply(t):a},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,a,n){var i=this._relativeTime[a];return"function"==typeof i?i(e,t,a,n):i.replace(/%d/i,e)},pastFuture:function(e,t){var a=this._relativeTime[0<e?"future":"past"];return"function"==typeof a?a(t):a.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Ce(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(p=function(e,t,a,n){var i;return"boolean"==typeof a&&(n=a,a=c),(i={_isAMomentObject:!0})._i=e,i._f=t,i._l=a,i._strict=n,i._isUTC=!1,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},Oe(i)}).utc=function(e,t,a,n){var i;return"boolean"==typeof a&&(n=a,a=c),(i={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0})._l=a,i._i=e,i._f=t,i._strict=n,i._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1},Oe(i).utc()},p.unix=function(e){return p(1e3*e)},p.duration=function(e,t){var a,n,i,s=e,r=null;return p.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(r=f.exec(e))?(a="-"===r[1]?-1:1,s={y:0,d:le(r[y])*a,h:le(r[v])*a,m:le(r[D])*a,s:le(r[o])*a,ms:le(r[l])*a}):(r=b.exec(e))&&(a="-"===r[1]?-1:1,s={y:(i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*a})(r[2]),M:i(r[3]),d:i(r[4]),h:i(r[5]),m:i(r[6]),s:i(r[7]),w:i(r[8])}),n=new X(s),p.isDuration(e)&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},p.version="2.5.1",p.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",p.updateOffset=function(){},p.lang=function(e,t){var a,n;return e?(t?(a=pe(e),(n=t).abbr=a,h[a]||(h[a]=new J),h[a].set(n),h[a]):null===t?(delete h[e],e="en"):h[e]||ge(e),(p.duration.fn._lang=p.fn._lang=ge(e))._abbr):p.fn._lang._abbr},p.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),ge(e)},p.isMoment=function(e){return e instanceof q||null!=e&&e.hasOwnProperty("_isAMomentObject")},p.isDuration=function(e){return e instanceof X},e=N.length-1;0<=e;--e)oe(N[e]);function xe(e,a){p.fn[e]=p.fn[e+"s"]=function(e){var t=this._isUTC?"UTC":"";return null!=e?(this._d["set"+t+a](e),p.updateOffset(this),this):this._d["get"+t+a]()}}for(p.normalizeUnits=function(e){return se(e)},p.invalid=function(e){var t=p.utc(NaN);return null!=e?Q(t._pf,e):t._pf.userInvalidated=!0,t},p.parseZone=function(e){return p(e).parseZone()},Q(p.fn=q.prototype,{clone:function(){return p(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=p(this).utc();return 0<e.year()&&e.year()<=9999?ye(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):ye(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return fe(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&0<ie(this._a,(this._isUTC?p.utc(this._a):p(this._a)).toArray()))},parsingFlags:function(){return Q({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=ye(this,e||p.defaultFormat);return this.lang().postformat(t)},add:function(e,t){return ae(this,"string"==typeof e?p.duration(+t,e):p.duration(e,t),1),this},subtract:function(e,t){return ae(this,"string"==typeof e?p.duration(+t,e):p.duration(e,t),-1),this},diff:function(e,t,a){var n,i,s=me(e,this),r=6e4*(this.zone()-s.zone());return"year"===(t=se(t))||"month"===t?(n=432e5*(this.daysInMonth()+s.daysInMonth()),i=12*(this.year()-s.year())+(this.month()-s.month()),i+=(this-p(this).startOf("month")-(s-p(s).startOf("month")))/n,i-=6e4*(this.zone()-p(this).startOf("month").zone()-(s.zone()-p(s).startOf("month").zone()))/n,"year"===t&&(i/=12)):(n=this-s,i="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),a?i:ee(i)},from:function(e,t){return p.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(p(),e)},calendar:function(){var e=me(p(),this).startOf("day"),t=this.diff(e,"days",!0),a=t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(a,this))},isLeapYear:function(){return de(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Me(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,a=this._isUTC?"UTC":"";return null!=e?("string"==typeof e&&"number"!=typeof(e=this.lang().monthsParse(e))||(t=this.date(),this.date(1),this._d["set"+a+"Month"](e),this.date(Math.min(t,this.daysInMonth())),p.updateOffset(this)),this):this._d["get"+a+"Month"]()},startOf:function(e){switch(e=se(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=se(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)>+p(e).startOf(t)},isBefore:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)<+p(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)==+me(e,this).startOf(t)},min:function(e){return(e=p.apply(null,arguments))<this?this:e},max:function(e){return this<(e=p.apply(null,arguments))?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=be(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,t!==e&&ae(this,p.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?p(e).zone():0,(this.zone()-e)%60==0},daysInMonth:function(){return ce(this.year(),this.month())},dayOfYear:function(e){var t=u((p(this).startOf("day")-p(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=Ce(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Ce(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=Ce(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return this[e=se(e)]()},set:function(e,t){return"function"==typeof this[e=se(e)]&&this[e](t),this},lang:function(e){return e===c?this._lang:(this._lang=ge(e),this)}}),e=0;e<t.length;e++)xe(t[e].toLowerCase().replace(/s$/,""),t[e]);function Se(e){p.duration.fn[e]=function(){return this._data[e]}}function Te(e,t){p.duration.fn["as"+e]=function(){return+this/t}}for(e in xe("year","FullYear"),p.fn.days=p.fn.day,p.fn.months=p.fn.month,p.fn.weeks=p.fn.week,p.fn.isoWeeks=p.fn.isoWeek,p.fn.toJSON=p.fn.toISOString,Q(p.duration.fn=X.prototype,{_bubble:function(){var e,t,a,n,i=this._milliseconds,s=this._days,r=this._months,o=this._data;o.milliseconds=i%1e3,e=ee(i/1e3),o.seconds=e%60,t=ee(e/60),o.minutes=t%60,a=ee(t/60),o.hours=a%24,s+=ee(a/24),o.days=s%30,r+=ee(s/30),o.months=r%12,n=ee(r/12),o.years=n},weeks:function(){return ee(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*le(this._months/12)},humanize:function(e){var t,a,n,i,s,r,o,l,c,h=+this,d=(t=h,a=!e,n=this.lang(),i=u(Math.abs(t)/1e3),s=u(i/60),r=u(s/60),o=u(r/24),l=u(o/365),(c=i<45&&["s",i]||1===s&&["m"]||s<45&&["mm",s]||1===r&&["h"]||r<22&&["hh",r]||1===o&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",u(o/30)]||1===l&&["y"]||["yy",l])[2]=a,c[3]=0<t,c[4]=n,function(e,t,a,n,i){return i.relativeTime(t||1,!!a,e,n)}.apply({},c));return e&&(d=this.lang().pastFuture(h,d)),this.lang().postformat(d)},add:function(e,t){var a=p.duration(e,t);return this._milliseconds+=a._milliseconds,this._days+=a._days,this._months+=a._months,this._bubble(),this},subtract:function(e,t){var a=p.duration(e,t);return this._milliseconds-=a._milliseconds,this._days-=a._days,this._months-=a._months,this._bubble(),this},get:function(e){return this[(e=se(e)).toLowerCase()+"s"]()},as:function(e){return this["as"+(e=se(e)).charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:p.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),a=Math.abs(this.days()),n=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(a?a+"D":"")+(n||i||s?"T":"")+(n?n+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}}),a)a.hasOwnProperty(e)&&(Te(e,a[e]),Se(e.toLowerCase()));function Re(e){var t=!1,a=p;"undefined"==typeof ender&&(e?(n.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),a.apply(null,arguments)},Q(n.moment,a)):n.moment=p)}Te("Weeks",6048e5),p.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},p.lang("en",{ordinal:function(e){var t=e%10;return e+(1===le(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),d?(module.exports=p,Re(!0)):"function"==typeof define&&define.amd?define("moment",function(e,t,a){return a.config&&a.config()&&!0!==a.config().noGlobal&&Re(a.config().noGlobal===c),p}):Re()}.call(this),function(m,g){var n=function(e,t,a){this.parentEl="body",this.element=m(e);"object"==typeof t&&null!==t||(t={}),this.parentEl="object"==typeof t&&t.parentEl&&m(t.parentEl).length?m(t.parentEl):m(this.parentEl),this.container=m('<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>').appendTo(this.parentEl),this.setOptions(t,a);var n=this.container;m.each(this.buttonClasses,function(e,t){n.find("button").addClass(t)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",m.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",m.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",m.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",m.proxy(this.enterDate,this)).on("mouseleave.daterangepicker","td.available",m.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",m.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",m.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",m.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",m.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",m.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",m.proxy(this.showCalendars,this)).on("click.daterangepicker","li",m.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",m.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",m.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":m.proxy(this.show,this),"focus.daterangepicker":m.proxy(this.show,this),"keyup.daterangepicker":m.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",m.proxy(this.toggle,this))};n.prototype={constructor:n,setOptions:function(e,t){if(this.startDate=g().startOf("week").startOf("day"),this.endDate=g().startOf("week").endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:g()._lang._weekdaysMin.slice(),monthNames:g()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},"string"==typeof e.format&&(this.format=e.format),"string"==typeof e.separator&&(this.separator=e.separator),"string"==typeof e.startDate&&(this.startDate=g(e.startDate,this.format)),"string"==typeof e.endDate&&(this.endDate=g(e.endDate,this.format)),"string"==typeof e.minDate&&(this.minDate=g(e.minDate,this.format)),"string"==typeof e.maxDate&&(this.maxDate=g(e.maxDate,this.format)),"object"==typeof e.startDate&&(this.startDate=g(e.startDate)),"object"==typeof e.endDate&&(this.endDate=g(e.endDate)),"object"==typeof e.minDate&&(this.minDate=g(e.minDate)),"object"==typeof e.maxDate&&(this.maxDate=g(e.maxDate)),"string"==typeof e.applyClass&&(this.applyClass=e.applyClass),"string"==typeof e.cancelClass&&(this.cancelClass=e.cancelClass),"object"==typeof e.dateLimit&&(this.dateLimit=e.dateLimit),"object"==typeof e.locale){if("object"==typeof e.locale.daysOfWeek&&(this.locale.daysOfWeek=e.locale.daysOfWeek.slice()),"object"==typeof e.locale.monthNames&&(this.locale.monthNames=e.locale.monthNames.slice()),"number"==typeof e.locale.firstDay){this.locale.firstDay=e.locale.firstDay;for(var a=e.locale.firstDay;0<a;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),a--}"string"==typeof e.locale.applyLabel&&(this.locale.applyLabel=e.locale.applyLabel),"string"==typeof e.locale.cancelLabel&&(this.locale.cancelLabel=e.locale.cancelLabel),"string"==typeof e.locale.fromLabel&&(this.locale.fromLabel=e.locale.fromLabel),"string"==typeof e.locale.toLabel&&(this.locale.toLabel=e.locale.toLabel),"string"==typeof e.locale.weekLabel&&(this.locale.weekLabel=e.locale.weekLabel),"string"==typeof e.locale.customRangeLabel&&(this.locale.customRangeLabel=e.locale.customRangeLabel)}var n,i,s;if("string"==typeof e.opens&&(this.opens=e.opens),"boolean"==typeof e.showWeekNumbers&&(this.showWeekNumbers=e.showWeekNumbers),"string"==typeof e.buttonClasses&&(this.buttonClasses=[e.buttonClasses]),"object"==typeof e.buttonClasses&&(this.buttonClasses=e.buttonClasses),"boolean"==typeof e.showDropdowns&&(this.showDropdowns=e.showDropdowns),"boolean"==typeof e.singleDatePicker&&(this.singleDatePicker=e.singleDatePicker),"boolean"==typeof e.timePicker&&(this.timePicker=e.timePicker),"number"==typeof e.timePickerIncrement&&(this.timePickerIncrement=e.timePickerIncrement),"boolean"==typeof e.timePicker12Hour&&(this.timePicker12Hour=e.timePicker12Hour),void 0===e.startDate&&void 0===e.endDate&&m(this.element).is("input[type=text]")){var r=m(this.element).val(),o=r.split(this.separator);n=i=null,2==o.length?(n=g(o[0],this.format),i=g(o[1],this.format)):this.singleDatePicker&&(n=g(r,this.format),i=g(r,this.format)),null!==n&&null!==i&&(this.startDate=n,this.endDate=i)}if("object"==typeof e.ranges){for(s in e.ranges)n=g(e.ranges[s][0]),i=g(e.ranges[s][1]),this.minDate&&n.isBefore(this.minDate)&&(n=g(this.minDate)),this.maxDate&&i.isAfter(this.maxDate)&&(i=g(this.maxDate)),this.minDate&&i.isBefore(this.minDate)||this.maxDate&&n.isAfter(this.maxDate)||(this.ranges[s]=[n,i]);var l="<ul>";for(s in this.ranges)l+="<li>"+s+"</li>";l+="<li>"+this.locale.customRangeLabel+"</li>",l+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(l)}if("function"==typeof t&&(this.cb=t),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:g([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:g([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens){var c=this.container.find(".calendar.left"),h=this.container.find(".calendar.right");c.removeClass("left").addClass("right"),h.removeClass("right").addClass("left")}void 0!==e.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(e){"string"==typeof e&&(this.startDate=g(e,this.format)),"object"==typeof e&&(this.startDate=g(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars()},setEndDate:function(e){"string"==typeof e&&(this.endDate=g(e,this.format)),"object"==typeof e&&(this.endDate=g(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.separator),t=null,a=null;2===e.length&&(t=g(e[0],this.format),a=g(e[1],this.format)),(this.singleDatePicker||null===t||null===a)&&(a=t=g(this.element.val(),this.format)),a.isBefore(t)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=t,this.endDate=a,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var e={top:0,left:0};this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()}),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,right:m(window).width()-this.element.offset().left-this.element.outerWidth()-e.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>m(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(e){this.element.hasClass("active")?this.hide():this.show()},show:function(e){this.element.addClass("active"),this.container.show(),this.move(),m(document).on("click.daterangepicker",m.proxy(this.outsideClick,this)),m(document).on("click.daterangepicker","[data-toggle=dropdown]",m.proxy(this.outsideClick,this)),this.element.trigger("show.daterangepicker",this)},outsideClick:function(e){var t=m(e.target);t.closest(this.element).length||t.closest(this.container).length||t.closest(".calendar-date").length||this.hide()},hide:function(e){m(document).off("click.daterangepicker",this.outsideClick),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.element.trigger("hide.daterangepicker",this)},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var a=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(a[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(a[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move()},hideCalendars:function(){this.container.removeClass("show-calendar")},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.startDate.format(this.format))},clickRange:function(e){var t=e.target.innerHTML;if((this.chosenLabel=t)==this.locale.customRangeLabel)this.showCalendars();else{var a=this.ranges[t];this.startDate=a[0],this.endDate=a[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(e){m(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(e){m(e.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(e){var t=m(e.target).attr("data-title"),a=t.substr(1,1),n=t.substr(3,1);m(e.target).parents(".calendar").hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[a][n].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[a][n].format(this.format))},clickDate:function(e){var t,a,n=m(e.target).attr("data-title"),i=n.substr(1,1),s=n.substr(3,1),r=m(e.target).parents(".calendar");if(r.hasClass("left")){if(t=this.leftCalendar.calendar[i][s],a=this.endDate,"object"==typeof this.dateLimit){var o=g(t).add(this.dateLimit).startOf("day");a.isAfter(o)&&(a=o)}}else if(t=this.startDate,a=this.rightCalendar.calendar[i][s],"object"==typeof this.dateLimit){var l=g(a).subtract(this.dateLimit).startOf("day");t.isBefore(l)&&(t=l)}if(this.singleDatePicker&&r.hasClass("left")?a=t.clone():this.singleDatePicker&&r.hasClass("right")&&(t=a.clone()),r.find("td").removeClass("active"),t.isSame(a)||t.isBefore(a))m(e.target).addClass("active"),this.startDate=t,this.endDate=a,this.chosenLabel=this.locale.customRangeLabel;else if(t.isAfter(a)){m(e.target).addClass("active");var c=this.endDate.diff(this.startDate);this.startDate=t,this.endDate=g(t).add("ms",c),this.chosenLabel=this.locale.customRangeLabel}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars(),this.timePicker||a.endOf("day"),this.singleDatePicker&&this.clickApply()},clickApply:function(e){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(e){var t=m(e.target).closest(".calendar").hasClass("left")?"left":"right",a=this.container.find(".calendar."+t),n=parseInt(a.find(".monthselect").val(),10),i=a.find(".yearselect").val();this[t+"Calendar"].month.month(n).year(i),this.updateCalendars()},updateTime:function(e){var t=m(e.target).closest(".calendar").hasClass("left"),a=t?"left":"right",n=this.container.find(".calendar."+a),i=parseInt(n.find(".hourselect").val(),10),s=parseInt(n.find(".minuteselect").val(),10);if(this.timePicker12Hour){var r=n.find(".ampmselect").val();"PM"===r&&i<12&&(i+=12),"AM"===r&&12===i&&(i=0)}if(t){var o=this.startDate.clone();o.hour(i),o.minute(s),this.startDate=o,this.leftCalendar.month.hour(i).minute(s)}else{var l=this.endDate.clone();l.hour(i),l.minute(s),this.endDate=l,this.rightCalendar.month.hour(i).minute(s)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var e=!0,t=0;for(var a in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[a][0])&&this.endDate.isSame(this.ranges[a][1])&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[a][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[a][1].format("YYYY-MM-DD")&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()),t++;e&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html())},buildCalendar:function(e,t,a,n,i){var s,r=g([t,e,1]),o=g(r).subtract("month",1).month(),l=g(r).subtract("month",1).year(),c=g([l,o]).daysInMonth(),h=r.day(),d=[];for(s=0;s<6;s++)d[s]=[];var u=c-h+this.locale.firstDay+1;c<u&&(u-=7),h==this.locale.firstDay&&(u=c-6);var f,p,m=g([l,o,u,12,n]);for(p=f=s=0;s<42;s++,f++,m=g(m).add("hour",24))0<s&&f%7==0&&(f=0,p++),d[p][f]=m.clone().hour(a),m.hour(12);return d},renderDropdowns:function(e,t,a){for(var n=e.month(),i='<select class="monthselect">',s=0;s<12;s++)i+="<option value='"+s+"'"+(s===n?" selected='selected'":"")+">"+this.locale.monthNames[s]+"</option>";i+="</select>";for(var r=e.year(),o=a&&a.year()||r+5,l='<select class="yearselect">',c=t&&t.year()||r-50;c<=o;c++)l+='<option value="'+c+'"'+(c===r?' selected="selected"':"")+">"+c+"</option>";return i+(l+="</select>")},renderCalendar:function(e,t,a,n){var i='<div class="calendar-date">';i+='<table class="table-condensed">',i+="<thead>",i+="<tr>",this.showWeekNumbers&&(i+="<th></th>"),!a||a.isBefore(e[1][1])?i+='<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':i+="<th></th>";var s,r=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");this.showDropdowns&&(r=this.renderDropdowns(e[1][1],a,n)),i+='<th colspan="5" class="month">'+r+"</th>",!n||n.isAfter(e[1][1])?i+='<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':i+="<th></th>",i+="</tr>",i+="<tr>",this.showWeekNumbers&&(i+='<th class="week">'+this.locale.weekLabel+"</th>"),m.each(this.locale.daysOfWeek,function(e,t){i+="<th>"+t+"</th>"}),i+="</tr>",i+="</thead>",i+="<tbody>";for(var o=0;o<6;o++){i+="<tr>",this.showWeekNumbers&&(i+='<td class="week">'+e[o][0].week()+"</td>");for(var l=0;l<7;l++){var c="available ";c+=e[o][l].month()==e[1][1].month()?"":"off",a&&e[o][l].isBefore(a)||n&&e[o][l].isAfter(n)?c=" off disabled ":e[o][l].format("YYYY-MM-DD")==t.format("YYYY-MM-DD")?(c+=" active ",e[o][l].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(c+=" start-date "),e[o][l].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(c+=" end-date ")):e[o][l]>=this.startDate&&e[o][l]<=this.endDate&&(c+=" in-range ",e[o][l].isSame(this.startDate)&&(c+=" start-date "),e[o][l].isSame(this.endDate)&&(c+=" end-date "));var h="r"+o+"c"+l;i+='<td class="'+c.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+h+'">'+e[o][l].date()+"</td>"}i+="</tr>"}if(i+="</tbody>",i+="</table>",i+="</div>",this.timePicker){i+='<div class="calendar-time">',i+='<select class="hourselect">';var d=0,u=23,f=t.hour();for(this.timePicker12Hour&&(d=1,(u=12)<=f&&(f-=12),0===f&&(f=12)),s=d;s<=u;s++)i+=s==f?'<option value="'+s+'" selected="selected">'+s+"</option>":'<option value="'+s+'">'+s+"</option>";for(i+="</select> : ",i+='<select class="minuteselect">',s=0;s<60;s+=this.timePickerIncrement){var p=s;p<10&&(p="0"+p),s==t.minute()?i+='<option value="'+s+'" selected="selected">'+p+"</option>":i+='<option value="'+s+'">'+p+"</option>"}i+="</select> ",this.timePicker12Hour&&(i+='<select class="ampmselect">',12<=t.hour()?i+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':i+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',i+="</select>"),i+="</div>"}return i},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},m.fn.daterangepicker=function(t,a){return this.each(function(){var e=m(this);e.data("daterangepicker")&&e.data("daterangepicker").remove(),e.data("daterangepicker",new n(e,t,a))}),this}}(window.jQuery,window.moment),angular.module("angularjssearchbox",["angularjssearchbox.typeahead","ngDateRange"]).directive("sbFocus",["$timeout",function(a){return function(e,t){a(function(){e.useKeywordFacet||t[0].value||t[0].focus()})}}]).directive("repeatDone",function(){return function(e,t,a){e.bindValueInput(t)}}).directive("searchBox",["$timeout",function(o){return{restrict:"A",templateUrl:"templates/searchBox.html",scope:{resultList:"=",facetList:"=",debug:"=?",dateOptions:"=?",placeholder:"@?"},link:function(r,e,t){function s(e,t){for(var a in r.facetList)if(r.facetList[a].name===e&&null!=r.facetList[a].values)for(var n in r.facetList[a].values)if(n===t)return r.facetList[a].values[n];return t}function i(e){for(var t in r.facetList)if(r.facetList[t].name===e)return r.facetList[t].type;return"string"}function a(e){var t=[];for(var a in e){var n=new Object;n.key=e[a].key,n.type=i(n.key),n.value=s(n.key,e[a].value),t.push(n)}return t}r.tmpInputValue=null,r.selectedResult=null,r.debug=r.debug||!1,r.placeholder=r.placeholder||"Filtrer les données",r.useKeywordFacet=!1,r.hasKeywordFacet=!1,r.initDone=!1,r.values={},r.showPlaceHolder=!0,r.toDay=moment().format("DD/MM/YYYY"),r.dateOptions=r.dateOptions||{minDate:"01/01/2004",maxDate:moment().add("years",2),showDropdowns:!0,showWeekNumbers:!1,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!1,ranges:{"Aujourd'hui":[moment(),moment()],"Semestre en cours":moment().get("month")<6?[moment().startOf("year"),moment().startOf("year").add("months",6).subtract("days",1)]:[moment().startOf("year").add("months",6),moment().endOf("year")],"Prochain Semestre":moment().get("month")<6?[moment().startOf("year").add("months",6),moment().endOf("year")]:[moment().startOf("year").add("years",1),moment().endOf("year").add("months",6)],"Mois dernier":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")],"3 prochains mois":[moment().startOf("month"),moment().add("month",3).endOf("month")]},opens:"right",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",format:"DD/MM/YYYY",separator:" - ",singleDatePicker:!1,locale:{applyLabel:"Valider",cancelLabel:"Annuler",fromLabel:"Du",toLabel:"Au",customRangeLabel:"Calendrier",daysOfWeek:["Di","Lu","Ma","Me","Je","Ve","Sa"],monthNames:["Janvier","F&eacute;vrier","Mars","Avril","Mai","Juin","Juillet","Ao&ucirc;t","Septembre","Octobre","Novembre","D&eacute;cembre"],firstDay:1}},r.dateOptionsDate=angular.copy(r.dateOptions),r.dateOptionsDate.singleDatePicker=!0,r.dateOptionsRange=angular.copy(r.dateOptions),r.changeEventDateRange=function(e,t,a){var n=this.element.context.value,i=this.element[0].attributes["data-tah-index"].value;r.sbResultList[i].value=n,void 0!==s&&o.cancel(s);var s=o(function(){if(r.hasKeywordFacet&&"text"!=r.sbResultList[r.sbResultList.length-1].key){var e=r.sbResultList.pop();r.sbResultList.splice(r.sbResultList.length-1,0,e),i+=-1}var t=new Object;t.key=r.sbResultList[i].key,t.type=r.sbResultList[i].type,t.value=n,r.resultList[i]=t,r.selectInputFacet(),r.selectedResult=null},500)},r.$watch("facetList",function(e){r.sbFacetList=function(e){for(var t in e)for(var a in e[t].items)e[t].items[a].hasOwnProperty("label")||(e[t].items[a].label=e[t].items[a].name);return e}(e),r.initDone=!1,r.sbResultList=a(r.resultList),r.hasOwnProperty("selected")||(r.selected={key:"",value:""})}),r.$watch("resultList",function(e){r.initDone=!1,r.sbResultList=a(e)});var n=[9,13,37,38,39,40];e.find("input").bind("keydown",function(e){-1!==n.indexOf(e.which)&&(e.preventDefault(),13===e.which?(r.useKeywordFacet=!0,o(function(){r.useKeywordFacet&&(r.selected.value="",r.initDone=!0,r.hasKeywordFacet?(r.sbResultList[r.sbResultList.length-1].value+=" "+r.selected.key,r.resultList[r.resultList.length-1].value+=" "+r.selected.key):(r.hasKeywordFacet=!0,r.sbResultList.push({key:"text",type:"string",value:r.selected.key}),r.resultList.push({key:"text",type:"string",value:r.selected.key})),r.selected.key="",o(function(){r.selectInputFacet(),r.selectedResult=null}))})):9===e.which&&r.$apply(function(){}))}),e.find(".input-facet").bind("click",function(e){angular.element("input",e.target).focus()}),e.find("input").bind("focus",function(e){r.$apply(function(){r.showPlaceHolder=!1})}).bind("blur",function(e){r.$apply(function(){r.showPlaceHolder=!0})}),r.bindValueInput=function(e){o(function(){e.find("input").bind("keydown",function(t){-1!==n.indexOf(t.which)?(t.preventDefault(),13!==t.which&&9!==t.which||(r.hasKeywordFacet&&r.$apply(function(){if("text"!=r.sbResultList[r.sbResultList.length-1].key){var e=r.sbResultList.pop();r.sbResultList.splice(r.sbResultList.length-1,0,e)}}),r.$apply(function(){var e=new Object;e.key=r.sbResultList[t.target.dataset.tahIndex].key,e.type=r.sbResultList[t.target.dataset.tahIndex].type,e.value=r.sbResultList[t.target.dataset.tahIndex].value,r.resultList[t.target.dataset.tahIndex]=e,o(function(){r.selectInputFacet()}),r.selectedResult=null}))):r.initDone=!0})},50)},r.selectInputFacet=function(){e.find("input")[e.find("input").length-1].focus()},r.getFacetLabel=function(e){for(var t in r.sbFacetList)if(r.sbFacetList[t].name==e)return r.sbFacetList[t].label;return"text"===e?"Mot(s) clé(s)":e},r.getValueName=function(e,t,a){return r.values[e][t].name||a},r.getValues=function(t,e){var a=function(e){for(var t in r.facetList)if(r.facetList[t].name===e)return r.facetList[t];return null}(t);if(a)return"function"==typeof a.items?r.initDone?(r.initDone=!1,a.items(e,t).then(function(e){return r.values[t]=e})):[]:(r.values[t]=a.items,a.items)},r.$on("$typeahead.select",function(e,a,n,i){r.$apply(function(){r.useKeywordFacet=!1,-1==i?(r.selected.value="",r.sbResultList.push({key:a.name,type:a.type,value:""}),r.selected.key="",r.initDone=!0):o(function(){if(r.hasKeywordFacet&&"text"!=r.sbResultList[r.sbResultList.length-1].key){var e=r.sbResultList.pop();r.sbResultList.splice(r.sbResultList.length-1,0,e),i+=-1}var t=new Object;t.key=r.sbResultList[i].key,t.type=r.sbResultList[i].type,t.value=s(t,r.getValueName(t.key,n,a)),r.resultList[i]=t,r.selectInputFacet(),r.selectedResult=null},100)})}),r.selectResult=function(e,t){r.selectedResult=e,angular.element(t.currentTarget).find("input")[0].focus()},r.removeFilter=function(e){"text"===r.sbResultList[e].key&&(r.hasKeywordFacet=!1),r.sbResultList.splice(e,1),r.resultList=r.sbResultList.slice(0)},r.removeAll=function(){r.hasKeywordFacet=!1,r.sbResultList.length=0,r.resultList.length=0}}}}]),angular.module("ngDateRange",[]).directive("dateRange",["$timeout",function(n){return{restrict:"AE",scope:{dateRangeChange:"=",dateRangeOptions:"=",tahIndex:"@?",dateRangeTbutton:"=?"},template:'<span class="SB-addon" ng-if="dateRangeTbutton" ng-click="toggleSingleDate()"><i class="glyphicon glyphicon-calendar fa fa-calendar" ></i>&nbsp;<i class="glyphicon glyphicon-calendar fa fa-calendar" ng-hide="hideRange"></i></span>',link:function(t,a,e){t.dateRangeTbutton=t.dateRangeTbutton||!1,t.tahIndex=t.tahIndex||0,t.dateRangeTbutton&&(-1<e.value.indexOf("-")?t.dateRangeOptions.singleDatePicker=!1:t.dateRangeOptions.singleDatePicker=!0),t.hideRange=t.dateRangeOptions.singleDatePicker,t.hideRange&&(t.dateRangeOptions.startDate=e.value,t.dateRangeOptions.endDate=e.value),a.daterangepicker(t.dateRangeOptions,t.dateRangeChange),n(function(){a.parent().append(a.children().detach())}),t.hideRange&&a.data("daterangepicker").container.find(".calendar.left").after(a.data("daterangepicker").container.find(".calendar.right").detach()),t.$watch("dateRangeOptions",function(e){a.data("daterangepicker").setOptions(e,t.dateRangeChange),t.hideRange=e.singleDatePicker,t.hideRange||a.data("daterangepicker").container.find(".calendar.right").hasClass("single")&&(a.data("daterangepicker").container.find(".calendar.left").show(),a.data("daterangepicker").container.find(".calendar.right").removeClass("single"))}),t.$watch("dateRangeChange",function(e){a.data("daterangepicker").setOptions(t.dateRangeOptions,e),t.hideRange=t.dateRangeOptions.singleDatePicker}),t.toggleSingleDate=function(){a.val()&&t.dateRangeOptions.singleDatePicker&&-1==a.val().indexOf("-")&&(a.val(a.val()+" - "+a.val()),t.dateRangeOptions.startDate=a.val(),t.dateRangeOptions.endDate=a.val()),a.val()&&!t.dateRangeOptions.singleDatePicker&&-1!=a.val().indexOf("-")&&(a.val(a.val().slice(0,a.val().indexOf("-")-1)),t.dateRangeOptions.startDate=a.val(),t.dateRangeOptions.endDate=a.val()),t.dateRangeOptions.singleDatePicker=!t.dateRangeOptions.singleDatePicker,t.dateRangeOptions=angular.copy(t.dateRangeOptions),n(function(){a.data("daterangepicker").notify(),n(function(){a.focus()})})}}}}]),angular.module("angularjssearchbox.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$sbtooltip",function(){var _=this.defaults={animation:"am-fade",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,placement:"top",template:"templates/tooltip.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions","$$rAF",function(e,d,u,a,n,i,f,t,p,m){var g=String.prototype.trim,y="createTouch"in e.document,v=/ng-bind="/gi;function D(e,t){return angular.element((t||document).querySelectorAll(e))}function b(t){return a.when(n.get(t)||i.get(t)).then(function(e){return angular.isObject(e)?(n.put(t,e.data),e.data):e})}return function(i,e){var n={},s=i[0].nodeName.toLowerCase(),r=n.$options=angular.extend({},_,e);n.$promise=b(r.template);var t,a,o,l,c,h=n.$scope=r.scope&&r.scope.$new()||d.$new();return r.delay&&angular.isString(r.delay)&&(r.delay=parseFloat(r.delay)),r.title&&(n.$scope.title=r.title),h.$hide=function(){h.$$postDigest(function(){n.hide()})},h.$show=function(){h.$$postDigest(function(){n.show()})},h.$toggle=function(){h.$$postDigest(function(){n.toggle()})},n.$isShown=h.$isShown=!1,r.contentTemplate&&(n.$promise=n.$promise.then(function(e){var a=angular.element(e);return b(r.contentTemplate).then(function(e){var t=D('[ng-bind="content"]',a[0]);return t.length||(t=D('[ng-bind="title"]',a[0])),t.removeAttr("ng-bind").html(e),a[0].outerHTML})})),n.$promise.then(function(e){angular.isObject(e)&&(e=e.data),r.html&&(e=e.replace(v,'ng-bind-html="')),e=g.apply(e),o=u(e),n.init()}),n.init=function(){r.delay&&angular.isNumber(r.delay)&&(r.delay={show:r.delay,hide:r.delay}),"self"===r.container?c=i:r.container&&(c=D(r.container));var e=r.trigger.split(" ");angular.forEach(e,function(e){"click"===e?i.on("click",n.toggle):"manual"!==e&&(i.on("hover"===e?"mouseenter":"focus",n.enter),i.on("hover"===e?"mouseleave":"blur",n.leave),"button"===s&&"hover"!==e&&i.on(y?"touchstart":"mousedown",n.$onFocusElementMouseDown))}),r.show&&h.$$postDigest(function(){"focus"===r.trigger?i[0].focus():n.show()})},n.destroy=function(){for(var e=r.trigger.split(" "),t=e.length;t--;){var a=e[t];"click"===a?i.off("click",n.toggle):"manual"!==a&&(i.off("hover"===a?"mouseenter":"focus",n.enter),i.off("hover"===a?"mouseleave":"blur",n.leave),"button"===s&&"hover"!==a&&i.off(y?"touchstart":"mousedown",n.$onFocusElementMouseDown))}l&&(l.remove(),l=null),h.$destroy()},n.enter=function(){if(clearTimeout(t),a="in",!r.delay||!r.delay.show)return n.show();t=setTimeout(function(){"in"===a&&n.show()},r.delay.show)},n.show=function(){h.$emit(r.prefixEvent+".show.before",n);var e=r.container?c:null,t=r.container?null:i;l&&l.remove(),(l=n.$element=o(h,function(e,t){})).css({top:"0px",left:"0px",display:"block"}).addClass(r.placement),r.animation&&l.addClass(r.animation),r.type&&l.addClass(r.prefixClass+"-"+r.type),f.enter(l,e,t,function(){h.$emit(r.prefixEvent+".show",n)}),n.$isShown=h.$isShown=!0,h.$$phase||h.$root.$$phase||h.$digest(),m(n.$applyPlacement),r.keyboard&&("focus"!==r.trigger?(n.focus(),l.on("keyup",n.$onKeyUp)):i.on("keyup",n.$onFocusKeyUp))},n.leave=function(){if(clearTimeout(t),a="out",!r.delay||!r.delay.hide)return n.hide();t=setTimeout(function(){"out"===a&&n.hide()},r.delay.hide)},n.hide=function(e){if(n.$isShown)return h.$emit(r.prefixEvent+".hide.before",n),f.leave(l,function(){h.$emit(r.prefixEvent+".hide",n)}),n.$isShown=h.$isShown=!1,h.$$phase||h.$root.$$phase||h.$digest(),r.keyboard&&null!==l&&l.off("keyup",n.$onKeyUp),e&&"focus"===r.trigger?i[0].blur():void 0},n.toggle=function(){n.$isShown?n.leave():n.enter()},n.focus=function(){l[0].focus()},n.$applyPlacement=function(){if(l){var e="body"===r.container?p.offset(i[0]):p.position(i[0]),t=l.prop("offsetWidth"),a=l.prop("offsetHeight"),n=function(e,t,a,n){var i,s=e.split("-");switch(s[0]){case"right":i={top:t.top+t.height/2-n/2,left:t.left+t.width};break;case"bottom":i={top:t.top+t.height,left:t.left+t.width/2-a/2};break;case"left":i={top:t.top+t.height/2-n/2,left:t.left-a};break;default:i={top:t.top-n,left:t.left+t.width/2-a/2}}if(!s[1])return i;if("top"===s[0]||"bottom"===s[0])switch(s[1]){case"left":i.left=t.left;break;case"right":i.left=t.left+t.width-a}else if("left"===s[0]||"right"===s[0])switch(s[1]){case"top":i.top=t.top-n;break;case"bottom":i.top=t.top+t.height}return i}(r.placement,e,t,a);n.top+="px",n.left+="px",l.css(n)}},n.$onKeyUp=function(e){27===e.which&&n.hide()},n.$onFocusKeyUp=function(e){27===e.which&&i[0].blur()},n.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),n.$isShown?i[0].blur():i[0].focus()},n}}]}).directive("bsTooltip",["$window","$location","$sce","$sbtooltip","$$rAF",function(e,t,r,o,l){return{restrict:"EAC",scope:!0,link:function(n,e,t,a){var i={scope:n};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","type"],function(e){angular.isDefined(t[e])&&(i[e]=t[e])}),angular.forEach(["title"],function(a){t[a]&&t.$observe(a,function(e,t){n[a]=r.trustAsHtml(e),angular.isDefined(t)&&l(function(){s&&s.$applyPlacement()})})}),t.bsTooltip&&n.$watch(t.bsTooltip,function(e,t){angular.isObject(e)?angular.extend(n,e):n.title=e,angular.isDefined(t)&&l(function(){s&&s.$applyPlacement()})},!0);var s=o(e,i);n.$on("$destroy",function(){s.destroy(),s=i=null})}}}]),angular.module("angularjssearchbox.typeahead",["angularjssearchbox.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var h=this.defaults={animation:"am-fade",prefixClass:"typeahead",placement:"bottom-left",template:"templates/typeAhead.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,tahIndex:-1,filter:"filter",limit:6};this.$get=function(e,t,c){angular.element(e.document.body);function a(e,a,t){var n={},i=angular.extend({},h,t);n=c(e,i);var s=t.scope,r=n.$scope;r.$resetMatches=function(){r.$matches=[],r.$activeIndex=0},r.$resetMatches(),r.$activate=function(e){r.$$postDigest(function(){n.activate(e)})},r.$select=function(e,t){r.$$postDigest(function(){n.select(e)})},r.$isVisible=function(){return n.$isVisible()},n.update=function(e){r.$matches=e,r.$activeIndex>=e.length&&(r.$activeIndex=0)},n.activate=function(e){r.$activeIndex=e},n.select=function(e){var t=r.$matches[e].value;a.$setViewValue(t),r.$resetMatches(),a.$render(),s&&s.$digest(),r.$emit("$typeahead.select",t,e,i.tahIndex)},n.$isVisible=function(){return i.minLength&&a?r.$matches.length&&angular.isString(a.$viewValue)&&a.$viewValue.length>=i.minLength:!!r.$matches.length},n.$getIndex=function(e){var t=r.$matches.length,a=t;if(t){for(a=t;a--&&r.$matches[a].value!==e;);if(!(a<0))return a}},n.$onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},n.$onKeyDown=function(e){/(38|40|13)/.test(e.keyCode)&&(e.preventDefault(),e.stopPropagation(),13===e.keyCode&&r.$matches.length?n.select(r.$activeIndex):38===e.keyCode&&0<r.$activeIndex?r.$activeIndex--:40===e.keyCode&&r.$activeIndex<r.$matches.length-1?r.$activeIndex++:angular.isUndefined(r.$activeIndex)&&(r.$activeIndex=0),r.$digest())};var o=n.show;n.show=function(){o(),setTimeout(function(){n.$element.on("mousedown",n.$onMouseDown),i.keyboard&&e.on("keydown",n.$onKeyDown)})};var l=n.hide;return n.hide=function(){n.$element.off("mousedown",n.$onMouseDown),i.keyboard&&e.off("keydown",n.$onKeyDown),l()},n}return a.defaults=h,a}}).directive("sbTypeahead",function(e,t,a,h,d){var u=h.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,n,t,i){var s={scope:a};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","tahIndex","minLength"],function(e){angular.isDefined(t[e])&&(s[e]=t[e])});var e=s.filter||u.filter,r=s.limit||u.limit,o=t.ngOptions;e&&(o+=" | "+e+":$viewValue"),r&&(o+=" | limitTo:"+r);d(o);var l=h(n,i,s),c=function(){d(o).valuesFn(a,i).then(function(e){e.length>r&&(e=e.slice(0,r)),1===e.length&&e[0].value===a.$modelValue||(l.update(e),i.$render())})};t.ngOptionsWatch&&a.$watch(t.ngOptionsWatch,c),a.$watch(t.ngModel,function(e,t){a.$modelValue=e,c()}),i.$render=function(){if(i.$isEmpty(i.$viewValue))return n.val("");var e=l.$getIndex(i.$modelValue),t=angular.isDefined(e)?l.$scope.$matches[e].label:i.$viewValue;t=angular.isObject(t)?t.label:t,n.val(t.replace(/<(?:.|\n)*?>/gm,"").trim())},a.$on("$destroy",function(){l.destroy(),l=s=null})}}}),angular.module("angularjssearchbox").run(["$templateCache",function(e){e.put("templates/searchBox.html",'<div class="SB-search"><div class="SB-search-box-wrapper form-control SB-search-box"><div class="SB-icon SB-icon-search"><span class="glyphicon glyphicon-search"></span></div><div class="SB-placeholder" data-ng-click="selectInputFacet()"><span data-ng-if="!sbResultList.length && showPlaceHolder">{{ placeholder }}</span></div><div class="SB-search-inner"><div class="search_parameter" style="padding:0;" data-ng-hide="sbResultList.length"></div><div class="search_parameter" repeat-done data-ng-class="{ selected : $index == selectedResult }" data-ng-repeat="parameter in sbResultList" data-ng-click="selectResult($index,$event)"><div class="search_parameter_remove SB-icon SB-icon-cancel" data-ng-click="removeFilter($index)"><span class="glyphicon glyphicon-remove"></span></div><div class="key">{{ getFacetLabel(parameter.key) }} :</div><div class="value" data-ng-if="(parameter.type == null || parameter.type == \'string\')"><span class="SB-inputSizer">{{ parameter.value }}</span> <input type="text" data-tah-index="{{ $index }}" class="form-control SB-inputValue" limit="999" data-trigger="focus" data-min-length="0" data-container="body" sb-focus sb-typeahead data-ng-model="parameter.value" data-ng-options="element.label as element.label + \' (\' +element.count+\')\' for element in getValues(parameter.key, $viewValue)"></div><div class="input-append input-group value" data-ng-if="parameter.type == \'date\'"><span class="SB-inputSizer">{{ parameter.value }}</span> <input type="text" data-tah-index="{{ $index }}" class="form-control SB-inputValue" value="{{ parameter.value || toDay }}" date-range date-range-options="dateOptionsDate" date-range-change="changeEventDateRange" sb-focus data-ng-model="parameter.value" data-ng-if="parameter.type == \'date\'"></div><div class="input-append input-group value" data-ng-if="parameter.type == \'range\'"><span class="SB-inputSizer">{{ parameter.value }}</span> <input type="text" data-tah-index="{{ $index }}" class="form-control SB-inputValue" value="{{ parameter.value || toDay }}" date-range date-range-options="dateOptionsRange" date-range-change="changeEventDateRange" sb-focus data-ng-model="parameter.value" data-ng-if="parameter.type == \'range\'"></div><div class="input-append input-group value" data-ng-if="parameter.type == \'dateOrRange\'"><span class="SB-inputSizer tgdaterange">{{ parameter.value }}</span> <input type="text" data-tah-index="{{ $index }}" class="form-control SB-inputValue" value="{{ parameter.value || toDay}}" date-range date-range-options="dateOptions" date-range-tbutton="true" date-range-change="changeEventDateRange" sb-focus data-ng-model="parameter.value" data-ng-if="parameter.type == \'dateOrRange\'"></div></div></div><div class="search_parameter input-facet"><input data-min-length="0" type="text" data-limit="30" data-trigger="focus" data-container="body" data-delay="{ show: 500, hide: 0 }" class="form-control" sb-typeahead data-ng-model="selected.key" data-ng-options="element as element.label for element in sbFacetList" data-ng-options-watch="sbFacetList"></div></div><div class="SB-icon SB-icon-cancel SB-cancel-search-box" title="clear search" data-ng-click="removeAll()"><span class="glyphicon glyphicon-remove-circle"></span></div></div>')}]),angular.module("angularjssearchbox").run(["$templateCache",function(e){e.put("templates/tooltip.html",'<div class="tooltip in" data-ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" data-ng-bind="title"></div></div>')}]),angular.module("angularjssearchbox").run(["$templateCache",function(e){e.put("templates/typeAhead.html",'<ul tabindex="-1" class="typeahead dropdown-menu" role="select" data-ng-show="$isVisible()"><li role="presentation" data-ng-repeat="match in $matches" data-ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" data-ng-click="$select($index, $event)" data-ng-bind="match.label"></a></li></ul>')}]);